# 10.19 - Modeling Object State Using State Machine Diagrams

<img src="/images/10_19_01.jpg" width="800" height="500">
<img src="/images/10_19_02.jpg" width="800" height="500">

**After looking at modeling object state using state machine diagrams where we introduced the object state, we identify the elements of a state machine diagram; we created a state machine diagram for a complex object. Let us go ahead and look at an example that illustrates the features that we learned in this module. Looking at the slide, we see an example of a state diagram for a banking system. So again in this complex account object, we have a some assumptions where we say okay all accounts start with the balance of zero and an account with a balance greater than or equal to zero has a state of Active. And when accounts are Active, a customer may deposit any amount of money, Withdraw any amount of money, again and transfer money from the Active account to another account. And as a note, we actually have an overdraft limit, which is set again to an amount that a customers account can have in a short-term less than three months, for example. Again depth without being Frozen, so it is again similar to a short-term loan from the bank. Also, if the balance in an account becomes less than zero, but greater than the overdrafts limits such as in what I stated, then in this case the account state is changed to overdrawn when an account is overdrawn. Of course, an account is overdrawn when a customer can still withdraw money from an overdrawn account, as long as the amount withdrawn does not cause the balance to go below the overdraft limit. And a customer is sent monthly notices about the status of the account. And of course, a customer is notified of being overdrawn when they withdraw money from an automated teller machine. Also, a customer cannot transfer money from the overdrawn account to another account and a customer cannot close the account. And if the status remains overdrawn for more than three months, then the account state is changed to Frozen. When an account is Frozen, the customer cannot withdraw money from the account, customer can deposit money into the account. The customer is sent monthly notices about the status of the account. The customer is notified by the ATM that they must meet with the bank’s manager to unfreeze the account. The customer cannot close the account and the bank manager might decide to close all of the customer’s accounts and file legal actions against the customer. Again should this happen, the customer cannot open any accounts with this particular bank again. Whenever the account balance falls below zero by an amount equal to the overdraft limit the account state is changed to Frozen. Again of course, if an account is closed by the customer if the account state is changed to Closed and the customer can no longer use the account. So here what we are doing on this current slide is we first select the initial and final states. Okay account is open and then account is closed. And then we decided to use four different states in this case Account, Withdrawn, Frozen, and Closed. And we see how once it is Active, so when the account is open its Active it moves to the Active stage. From the Active stage we can to overdrawn by if when the balance is less than zero and the balance is greater than or equal to overdraft. We can move back to the Active state when the balance is greater than or equal to zero. Again from Withdrawn, we can move to its stage to the or the transition to the Frozen state and in this case when the balance is less than zero and the balance is greater than or equal to overdraft and the time is greater than or equal to three months. In this case, we notify the manager. Of course, when the balance is less than or equal to overdraft, we also notify the manager and move from the Withdrawn to Frozen. We also can move from the Active to Frozen account and this is when the balance is less than or equal to overdraft, again we notify the manager. And we can move from Frozen to Active when the balance is greater than or equal to zero. And of course, from the Active stage we can move to the Closed state by again in this case when the account is Closed. Again, that account can be closed either from the manager or it also can be closed from the request of the customer. And of course, from the Closed state, we can actually move to the Closed account which is in this case the final state where in this case the account is closed.**

